(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4055a2b3"],{"089c":function(t,e,n){"use strict";var a=n("cf1c"),r=n("e524"),i=n("edc9"),o=n("5d8b"),s=n("d15c"),c=n("affb"),l=Math.max,u=Math.min,h=Math.floor,d=/\$([$&`']|\d\d?|<[^>]*>)/g,v=/\$([$&`']|\d\d?)/g,p=function(t){return void 0===t?t:String(t)};n("6432")("replace",2,(function(t,e,n,f){return[function(a,r){var i=t(this),o=void 0==a?void 0:a[e];return void 0!==o?o.call(a,i,r):n.call(String(i),a,r)},function(t,e){var r=f(n,t,this,e);if(r.done)return r.value;var h=a(t),d=String(this),v="function"===typeof e;v||(e=String(e));var m=h.global;if(m){var b=h.unicode;h.lastIndex=0}var _=[];while(1){var y=c(h,d);if(null===y)break;if(_.push(y),!m)break;var k=String(y[0]);""===k&&(h.lastIndex=s(d,i(h.lastIndex),b))}for(var C="",w=0,x=0;x<_.length;x++){y=_[x];for(var $=String(y[0]),S=l(u(o(y.index),d.length),0),V=[],L=1;L<y.length;L++)V.push(p(y[L]));var I=y.groups;if(v){var D=[$].concat(V,S,d);void 0!==I&&D.push(I);var M=String(e.apply(void 0,D))}else M=g($,d,S,V,I,e);S>=w&&(C+=d.slice(w,S)+M,w=S+$.length)}return C+d.slice(w)}];function g(t,e,a,i,o,s){var c=a+t.length,l=i.length,u=v;return void 0!==o&&(o=r(o),u=d),n.call(s,u,(function(n,r){var s;switch(r.charAt(0)){case"$":return"$";case"&":return t;case"`":return e.slice(0,a);case"'":return e.slice(c);case"<":s=o[r.slice(1,-1)];break;default:var u=+r;if(0===u)return n;if(u>l){var d=h(u/10);return 0===d?n:d<=l?void 0===i[d-1]?r.charAt(1):i[d-1]+r.charAt(1):n}s=i[u-1]}return void 0===s?"":s}))}}))},2967:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("page-view",[n("a-row",[n("a-col",{attrs:{span:24}},[n("a-card",{attrs:{bodyStyle:{padding:"16px"},bordered:!1}},[n("a-card",{staticClass:"environment-info",attrs:{bodyStyle:{padding:"16px"},bordered:!1}},[n("template",{slot:"title"},[t._v(" 环境信息 "),n("a",{attrs:{href:"javascript:void(0);"},on:{click:t.handleCopyEnvironments}},[n("a-icon",{attrs:{type:"copy"}})],1)]),n("a-popover",{attrs:{slot:"extra",title:t.isLatest?"当前为最新版本":"有新版本",placement:"left"},slot:"extra"},[n("template",{slot:"content"},[n("p",[t._v(t._s(t.versionMessage))]),n("a-button",{attrs:{type:"dashed"},on:{click:t.handleShowVersionContent}},[t._v("查看详情")])],1),n("a-button",{attrs:{icon:t.isLatest?"check-circle":"exclamation-circle",loading:t.checking,shape:"circle",type:"dashed"}})],2),n("ul",{staticClass:"p-0 m-0 list-none"},[n("li",[t._v("版本："+t._s(t.environments.version))]),n("li",[t._v("数据库："+t._s(t.environments.database))]),n("li",[t._v("运行模式："+t._s(t.environments.mode))]),n("li",[t._v("启动时间："+t._s(t._f("moment")(t.environments.startTime)))])]),n("a",{staticClass:"mr-3",attrs:{href:"https://halo.run",target:"_blank"}},[t._v("官网 "),n("a-icon",{attrs:{type:"link"}})],1),n("a",{staticClass:"mr-3",attrs:{href:"https://docs.halo.run",target:"_blank"}},[t._v("文档 "),n("a-icon",{attrs:{type:"link"}})],1),n("a",{staticClass:"mr-3",attrs:{href:"https://github.com/halo-dev",target:"_blank"}},[t._v("开源组织 "),n("a-icon",{attrs:{type:"link"}})],1),n("a",{staticClass:"mr-3",attrs:{href:"https://bbs.halo.run",target:"_blank"}},[t._v("在线社区 "),n("a-icon",{attrs:{type:"link"}})],1)],2),n("a-card",{attrs:{bodyStyle:{padding:"16px"},bordered:!1,loading:t.contributorsLoading,title:"开发者"}},t._l(t.contributors,(function(t,e){return n("a",{key:e,attrs:{href:t.html_url,target:"_blank"}},[n("a-tooltip",{attrs:{title:t.login,placement:"top"}},[n("a-avatar",{style:{marginRight:"10px",marginBottom:"10px"},attrs:{src:t.avatar_url,size:"large"}})],1)],1)})),0)],1)],1),n("a-col",{attrs:{span:24}})],1),n("a-modal",{attrs:{title:t.versionContentModalTitle,visible:t.versionContentVisible,width:620,"ok-text":"查看更多"},on:{cancel:function(e){t.versionContentVisible=!1},ok:t.handleOpenVersionUrl}},[n("div",{domProps:{innerHTML:t._s(t.versionContent)}})])],1)},r=[],i=(n("91d2"),n("089c"),n("dd51"),n("9d84")),o=(n("cb4c"),n("3ed1")),s=n("28d2"),c=n.n(s),l=n("fb09"),u=n.n(l),h=n("680a"),d=c.a.create({baseURL:"https://api.github.com",timeout:1e4,headers:{"Content-Type":"application/json",Accept:"application/vnd.github.v3+json"},withCredentials:!1}),v={components:{PageView:h["c"]},data:function(){return{environments:{},contributors:[{login:"",id:0,node_id:"",avatar_url:"",gravatar_id:"",url:"",html_url:"",followers_url:"",following_url:"",gists_url:"",starred_url:"",subscriptions_url:"",organizations_url:"",repos_url:"",events_url:"",received_events_url:"",type:"",site_admin:!1,contributions:0}],contributorsLoading:!0,checking:!1,isLatest:!1,latestData:{},versionContentVisible:!1}},computed:{versionMessage:function(){return"当前版本：".concat(this.environments.version,"，").concat(this.isLatest?"已经是最新版本。":"新版本：".concat(this.latestData.name,"，你可以点击下方按钮查看详情。"))},versionContent:function(){return this.latestData&&this.latestData.body?u()(this.latestData.body):"暂无内容"},versionContentModalTitle:function(){return"".concat(this.latestData.name," 更新内容")}},created:function(){this.getEnvironments(),this.fetchContributors()},methods:{getEnvironments:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,o["a"].getEnvironment().then((function(t){e.environments=t.data}));case 2:this.checkServerUpdate();case 3:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),handleCopyEnvironments:function(){var t=this,e="版本：".concat(this.environments.version,"\n数据库：").concat(this.environments.database,"\n运行模式：").concat(this.environments.mode,"\nUser Agent：").concat(navigator.userAgent);this.$copyText(e).then((function(e){t.$log.debug("copy",e),t.$message.success("复制成功！")})).catch((function(e){t.$log.debug("copy.err",e),t.$message.error("复制失败！")}))},fetchContributors:function(){var t=this;t.contributorsLoading=!0,d.get("/repos/halo-dev/halo/contributors?per_page=100").then((function(e){t.contributors=e.data})).catch((function(e){t.$log.error("Fetch contributors error",e)})).finally((function(){t.contributorsLoading=!1}))},checkServerUpdate:function(){var t=this,e=this.$createElement,n=this;n.checking=!0,d.get("/repos/halo-dev/halo/releases/latest").then((function(a){var r=a.data;if(n.latestData=r,!r.draft&&!r.prerelease){var i=n.calculateIntValue(n.environments.version),o=n.calculateIntValue(r.name);if(i>=o)n.isLatest=!0;else{var s="新版本提醒",c="检测到 Halo 新版本："+r.name+"，点击下方按钮查看最新版本。";n.$notification.open({message:s,description:c,icon:e("a-icon",{attrs:{type:"smile"},style:"color: #108ee9"}),btn:function(e){return e("a-button",{props:{type:"primary",size:"small"},on:{click:function(){return t.handleShowVersionContent()}}},"去看看")}})}}})).catch((function(t){this.$log.error("Check update fail",t)})).finally((function(){t.checking=!1}))},handleShowVersionContent:function(){this.versionContentVisible=!0},handleOpenVersionUrl:function(){window.open(this.latestData.html_url,"_blank")},calculateIntValue:function(t){t=t.replace(/v/g,"");var e=t.split(".");if(null==e||3!==e.length)return-1;var n=parseInt(e[0]),a=parseInt(e[1]),r=parseInt(e[2]);return isNaN(n)||isNaN(a)||isNaN(r)?-1:1e6*n+1e3*a+r}}},p=v,f=n("838c"),g=Object(f["a"])(p,a,r,!1,null,null,null);e["default"]=g.exports}}]);